<h1>Competitions</h1>

{% if session %}
    <form action="{% url 'smartathon:user logout handler' %}" method="get">
        <button type="submit">Log Out</button>
    </form>

    <form action="{% url 'smartathon:create competition dev ui' %}" method="get">
        <button type="submit">Register a new Competition</button>
    </form>

    <form hidden action="{% url 'smartathon:create competition dev ui' %}" method="get">
        <button type="submit">View team details</button>
    </form>
{% else %}
    <form action="{% url 'smartathon:create user dev ui' %}" method="get">
        <button type="submit">Sign Up</button>
    </form>

    <form action="{% url 'smartathon:user login dev ui' %}" method="get">
        <button type="submit">Log In</button>
    </form>
{% endif %}

<ul>
    {% for c in c_list %}
        <li>
            {{ c.cname }}
            <br>
            <b>Date: {{ c.cdate }}</b>
            <br>
            <b>Venue: {{ c.cvenue }}</b>
            <br>
            <i>{{ c.cdesc }}</i>
            <br>
            You can create a team of {{ c.max_members }} members.
        </li>
        <br>
    {% endfor %}
</ul>

{% for c in c_list %}
    <h1>{{ c.cname }}</h1>
    <ul>
        {% for t in c.teams %}
            <li>
                {{ t.tname }}
                <br>
                <ul>
                    <li>Date: {{ c.cdate }}</li>
                    <li>Venue: {{ c.cvenue }}</li>
                    <li>Vacant Spaces: {{ t.vacant_members }}</li>

                    {% if session %}
                        <li>
                            <form action="{% url 'smartathon:create join request dev ui' t.tname c.cname %}"
                                  method="get">
                                <button type="submit">Request team to join.</button>
                            </form>
                        </li>{% endif %}
                </ul>
            </li>
        {% endfor %}
    </ul>

    {% if session %}
        <form action="{% url 'smartathon:create team dev ui' c.cname %}" method="get">
            <button type="submit">Create a new Team</button>
        </form>
    {% endif  %}

{% endfor %}